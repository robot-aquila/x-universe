<?xml version="1.0" standalone="yes" ?>
<?xml-stylesheet href="x2script.xsl" type="text/xsl" ?>
<script>
<name>wwsl.T2.buyWare</name>
<version>1001</version>
<engineversion>33</engineversion>
<description>Buy ware</description>
<arguments>
</arguments>
<sourcetext>
<line linenr="001" interruptable="@" indent=""><var>$vnPrefix&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.getVariablesPrefix</call><text>&#160;:&#160;</text></line>
<line linenr="002" indent=""><var>$vnStatBought&#160;=&#160;</var><var>$vnPrefix</var><text>&#160;</text><var>+</var><text>&#160;</text><var>'SCB'</var></line>
<line linenr="003" indent=""></line>
<line linenr="004" interruptable="@" indent=""><var>$Ware&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.getVar</call><text>&#160;:&#160;</text><text>&#160;Variable&#160;suffix=</text><var>'WP'</var></line>
<line linenr="005" indent=""><var>SEARCH</var><text>:</text></line>
<line linenr="006" indent=""><var>[THIS]&#160;-&gt;</var><text>&#160;set&#160;command:&#160;</text><var>COMMAND_GET_WARE</var></line>
<line linenr="007" indent=""><var>[THIS]&#160;-&gt;</var><text>&#160;set&#160;wanted&#160;ware&#160;to&#160;</text><var>$Ware</var></line>
<line linenr="008" indent=""><var>[THIS]&#160;-&gt;</var><text>&#160;set&#160;destination&#160;to&#160;</text><var>null</var></line>
<line linenr="009" indent=""></line>
<line linenr="010" interruptable="@" indent=""><var>$CargoAmount&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.util.getWareAmountPerc</call><text>&#160;:&#160;</text><text>&#160;Station=</text><var>[THIS]</var><text>&#160;</text><text>&#160;Ware=</text><var>$Ware</var><text>&#160;</text><text>&#160;Sum&#160;up&#160;amount&#160;in&#160;cargo=</text><var>[FALSE]</var></line>
<line linenr="011" indent=""><var>skip&#160;if&#160;</var><var>$CargoAmount</var><text>&#160;</text><var>&lt;</var><text>&#160;</text><var>70</var></line>
<line linenr="012" indent="&#160;"><text>return&#160;</text><var>[FALSE]</var></line>
<line linenr="013" indent=""></line>
<line linenr="014" interruptable="@" indent=""><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.search.lock</call><text>&#160;:&#160;</text><text>&#160;Search&#160;ware=</text><var>$Ware</var><text>&#160;</text><text>&#160;0&#160;-&#160;for&#160;buying,&#160;1&#160;-&#160;for&#160;selling=</text><var>0</var></line>
<line linenr="015" interruptable="@" indent=""><var>$Station&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.search.supply</call><text>&#160;:&#160;</text></line>
<line linenr="016" indent=""><var>if&#160;not&#160;</var><var>$Station</var></line>
<line linenr="017" interruptable="@" indent="&#160;"><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.search.unlock</call><text>&#160;:&#160;</text><text>&#160;Search&#160;ware=</text><var>$Ware</var><text>&#160;</text><text>&#160;0&#160;-&#160;for&#160;buying,&#160;1&#160;-&#160;for&#160;selling=</text><var>0</var></line>
<line linenr="018" interruptable="@" indent="&#160;"><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.idle</call><text>&#160;:&#160;</text><text>&#160;0&#160;-&#160;Buyer,&#160;1&#160;-&#160;Seller=</text><var>1</var></line>
<line linenr="019" indent="&#160;"><text>return&#160;</text><var>[FALSE]</var></line>
<line linenr="020" indent=""><comment>*<text>goto&#160;label&#160;</text>SEARCH</comment></line>
<line linenr="021" indent=""><text>end</text></line>
<line linenr="022" indent=""></line>
<line linenr="023" interruptable="@" indent=""><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.lockStation</call><text>&#160;:&#160;</text><text>&#160;Station=</text><var>$Station</var><text>&#160;</text><text>&#160;Ware=</text><var>$Ware</var><text>&#160;</text><text>&#160;0-for&#160;buying,&#160;1-for&#160;selling=</text><var>0</var></line>
<line linenr="024" interruptable="@" indent=""><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.search.unlock</call><text>&#160;:&#160;</text><text>&#160;Search&#160;ware=</text><var>$Ware</var><text>&#160;</text><text>&#160;0&#160;-&#160;for&#160;buying,&#160;1&#160;-&#160;for&#160;selling=</text><var>0</var></line>
<line linenr="025" indent=""></line>
<line linenr="026" indent=""><comment><text>*&#160;</text><var>Fly&#160;to&#160;station</var></comment></line>
<line linenr="027" interruptable="@" indent=""><var>while&#160;not&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.nav.move</call><text>&#160;:&#160;</text><text>&#160;Target&#160;station=</text><var>$Station</var></line>
<line linenr="028" interruptable="@" indent="&#160;"><var>if&#160;not&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.validate.seller</call><text>&#160;:&#160;</text><text>&#160;Station&#160;to&#160;validate=</text><var>$Station</var></line>
<line linenr="029" interruptable="@" indent="&#160;&#160;"><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.resetStationLock</call><text>&#160;:&#160;</text><text>&#160;Station=</text><var>$Station</var><text>&#160;</text><text>&#160;Ware=</text><var>$Ware</var><text>&#160;</text><text>&#160;0-for&#160;buying,&#160;1-for&#160;selling=</text><var>0</var><text>&#160;</text><text>&#160;Force&#160;unlock=</text><var>[FALSE]</var></line>
<line linenr="030" interruptable="@" indent="&#160;&#160;"><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.idle</call><text>&#160;:&#160;</text><text>&#160;0&#160;-&#160;Buyer,&#160;1&#160;-&#160;Seller=</text><var>1</var></line>
<line linenr="031" indent="&#160;&#160;"><text>goto&#160;label&#160;</text><var>SEARCH</var></line>
<line linenr="032" indent="&#160;"><text>end</text></line>
<line linenr="033" indent=""><text>end</text></line>
<line linenr="034" indent=""></line>
<line linenr="035" interruptable="@" indent=""><var>if&#160;not&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.validate.seller</call><text>&#160;:&#160;</text><text>&#160;Station&#160;to&#160;validate=</text><var>$Station</var></line>
<line linenr="036" interruptable="@" indent="&#160;"><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.resetStationLock</call><text>&#160;:&#160;</text><text>&#160;Station=</text><var>$Station</var><text>&#160;</text><text>&#160;Ware=</text><var>$Ware</var><text>&#160;</text><text>&#160;0-for&#160;buying,&#160;1-for&#160;selling=</text><var>0</var><text>&#160;</text><text>&#160;Force&#160;unlock=</text><var>[FALSE]</var></line>
<line linenr="037" interruptable="@" indent="&#160;"><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.idle</call><text>&#160;:&#160;</text><text>&#160;0&#160;-&#160;Buyer,&#160;1&#160;-&#160;Seller=</text><var>1</var></line>
<line linenr="038" indent="&#160;"><text>goto&#160;label&#160;</text><var>SEARCH</var></line>
<line linenr="039" indent=""><text>end</text></line>
<line linenr="040" indent=""></line>
<line linenr="041" indent=""><var>$StationPrice&#160;=&#160;</var><var>$Station&#160;-&gt;</var><text>&#160;get&#160;price&#160;of&#160;ware&#160;</text><var>$Ware</var></line>
<line linenr="042" interruptable="@" indent=""><var>$Bought&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.util.loadProduct</call><text>&#160;:&#160;</text><text>&#160;Ware=</text><var>$Ware</var><text>&#160;</text><text>&#160;Amount=</text><var>999999999</var></line>
<line linenr="043" interruptable="@" indent=""><var>=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.resetStationLock</call><text>&#160;:&#160;</text><text>&#160;Station=</text><var>$Station</var><text>&#160;</text><text>&#160;Ware=</text><var>$Ware</var><text>&#160;</text><text>&#160;0-for&#160;buying,&#160;1-for&#160;selling=</text><var>0</var><text>&#160;</text><text>&#160;Force&#160;unlock=</text><var>[FALSE]</var></line>
<line linenr="044" indent=""></line>
<line linenr="045" indent=""><var>$TotalBought&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;local&#160;variable:&#160;name=</text><var>$vnStatBought</var></line>
<line linenr="046" indent=""><var>$TotalBought&#160;=&#160;</var><var>$Bought</var><text>&#160;</text><var>*</var><text>&#160;</text><var>$StationPrice</var><text>&#160;</text><var>+</var><text>&#160;</text><var>$TotalBought</var></line>
<line linenr="047" indent=""><var>[THIS]&#160;-&gt;</var><text>&#160;set&#160;local&#160;variable:&#160;name=</text><var>$vnStatBought</var><text>&#160;value=</text><var>$TotalBought</var></line>
<line linenr="048" indent=""><text>return&#160;</text><var>[TRUE]</var></line>
</sourcetext>
<codearray>
<sval type="array" size="10"><sval type="string" val="wwsl.T2.buyWare" /><sval type="int" val="33" /><sval type="string" val="Buy ware" /><sval type="int" val="1001" /><sval type="int" val="0" /><sval type="array" size="8"><sval type="string" val="vnPrefix" /><sval type="string" val="vnStatBought" /><sval type="string" val="Ware" /><sval type="string" val="CargoAmount" /><sval type="string" val="Station" /><sval type="string" val="StationPrice" /><sval type="string" val="Bought" /><sval type="string" val="TotalBought" /></sval><sval type="array" size="35"><sval type="array" size="6"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.getVariablesPrefix" /><sval type="int" val="0" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="0" /></sval><sval type="array" size="13"><sval type="int" val="104" /><sval type="int" val="1" /><sval type="int" val="3" /><sval type="int" val="131074" /><sval type="int" val="0" /><sval type="int" val="5" /><sval type="string" val="SCB" /><sval type="int" val="15" /><sval type="int" val="11" /><sval type="int" val="3" /><sval type="int" val="-1" /><sval type="int" val="11" /><sval type="int" val="-2" /></sval><sval type="array" size="8"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.getVar" /><sval type="int" val="2" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="1" /><sval type="int" val="5" /><sval type="string" val="WP" /></sval><sval type="array" size="2"><sval type="int" val="101" /><sval type="string" val="SEARCH" /></sval><sval type="array" size="5"><sval type="int" val="524" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="18" /><sval type="int" val="9" /></sval><sval type="array" size="5"><sval type="int" val="650" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="131074" /><sval type="int" val="2" /></sval><sval type="array" size="5"><sval type="int" val="519" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="0" /><sval type="int" val="0" /></sval><sval type="array" size="12"><sval type="int" val="102" /><sval type="string" val="wwsl.util.getWareAmountPerc" /><sval type="int" val="3" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="3" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="131074" /><sval type="int" val="2" /><sval type="int" val="131075" /><sval type="int" val="9" /></sval><sval type="array" size="13"><sval type="int" val="104" /><sval type="int" val="-536868345" /><sval type="int" val="3" /><sval type="int" val="131074" /><sval type="int" val="3" /><sval type="int" val="4" /><sval type="int" val="70" /><sval type="int" val="15" /><sval type="int" val="3" /><sval type="int" val="3" /><sval type="int" val="-1" /><sval type="int" val="3" /><sval type="int" val="-2" /></sval><sval type="array" size="3"><sval type="int" val="103" /><sval type="int" val="131075" /><sval type="int" val="9" /></sval><sval type="array" size="10"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.search.lock" /><sval type="int" val="-2147483647" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="2" /><sval type="int" val="131074" /><sval type="int" val="2" /><sval type="int" val="4" /><sval type="int" val="0" /></sval><sval type="array" size="6"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.search.supply" /><sval type="int" val="4" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="0" /></sval><sval type="array" size="7"><sval type="int" val="104" /><sval type="int" val="-536866812" /><sval type="int" val="1" /><sval type="int" val="131074" /><sval type="int" val="4" /><sval type="int" val="1" /><sval type="int" val="-1" /></sval><sval type="array" size="10"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.search.unlock" /><sval type="int" val="-2147483647" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="2" /><sval type="int" val="131074" /><sval type="int" val="2" /><sval type="int" val="4" /><sval type="int" val="0" /></sval><sval type="array" size="8"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.idle" /><sval type="int" val="-2147483647" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="1" /><sval type="int" val="4" /><sval type="int" val="1" /></sval><sval type="array" size="3"><sval type="int" val="103" /><sval type="int" val="131075" /><sval type="int" val="9" /></sval><sval type="array" size="12"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.lockStation" /><sval type="int" val="-2147483647" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="3" /><sval type="int" val="131074" /><sval type="int" val="4" /><sval type="int" val="131074" /><sval type="int" val="2" /><sval type="int" val="4" /><sval type="int" val="0" /></sval><sval type="array" size="10"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.search.unlock" /><sval type="int" val="-2147483647" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="2" /><sval type="int" val="131074" /><sval type="int" val="2" /><sval type="int" val="4" /><sval type="int" val="0" /></sval><sval type="array" size="8"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.nav.move" /><sval type="int" val="-536864758" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="1" /><sval type="int" val="131074" /><sval type="int" val="4" /></sval><sval type="array" size="8"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.validate.seller" /><sval type="int" val="-536865020" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="1" /><sval type="int" val="131074" /><sval type="int" val="4" /></sval><sval type="array" size="14"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.resetStationLock" /><sval type="int" val="-2147483647" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="4" /><sval type="int" val="131074" /><sval type="int" val="4" /><sval type="int" val="131074" /><sval type="int" val="2" /><sval type="int" val="4" /><sval type="int" val="0" /><sval type="int" val="131075" /><sval type="int" val="9" /></sval><sval type="array" size="8"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.idle" /><sval type="int" val="-2147483647" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="1" /><sval type="int" val="4" /><sval type="int" val="1" /></sval><sval type="array" size="2"><sval type="int" val="100" /><sval type="int" val="3" /></sval><sval type="array" size="2"><sval type="int" val="112" /><sval type="int" val="18" /></sval><sval type="array" size="8"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.validate.seller" /><sval type="int" val="-536863740" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="1" /><sval type="int" val="131074" /><sval type="int" val="4" /></sval><sval type="array" size="14"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.resetStationLock" /><sval type="int" val="-2147483647" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="4" /><sval type="int" val="131074" /><sval type="int" val="4" /><sval type="int" val="131074" /><sval type="int" val="2" /><sval type="int" val="4" /><sval type="int" val="0" /><sval type="int" val="131075" /><sval type="int" val="9" /></sval><sval type="array" size="8"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.idle" /><sval type="int" val="-2147483647" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="1" /><sval type="int" val="4" /><sval type="int" val="1" /></sval><sval type="array" size="2"><sval type="int" val="100" /><sval type="int" val="3" /></sval><sval type="array" size="6"><sval type="int" val="627" /><sval type="int" val="131074" /><sval type="int" val="4" /><sval type="int" val="5" /><sval type="int" val="131074" /><sval type="int" val="2" /></sval><sval type="array" size="10"><sval type="int" val="102" /><sval type="string" val="wwsl.util.loadProduct" /><sval type="int" val="6" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="2" /><sval type="int" val="131074" /><sval type="int" val="2" /><sval type="int" val="4" /><sval type="int" val="999999999" /></sval><sval type="array" size="14"><sval type="int" val="102" /><sval type="string" val="wwsl.T2.resetStationLock" /><sval type="int" val="-2147483647" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="4" /><sval type="int" val="131074" /><sval type="int" val="4" /><sval type="int" val="131074" /><sval type="int" val="2" /><sval type="int" val="4" /><sval type="int" val="0" /><sval type="int" val="131075" /><sval type="int" val="9" /></sval><sval type="array" size="6"><sval type="int" val="156" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="131074" /><sval type="int" val="1" /><sval type="int" val="7" /></sval><sval type="array" size="19"><sval type="int" val="104" /><sval type="int" val="7" /><sval type="int" val="5" /><sval type="int" val="131074" /><sval type="int" val="6" /><sval type="int" val="131074" /><sval type="int" val="5" /><sval type="int" val="15" /><sval type="int" val="13" /><sval type="int" val="131074" /><sval type="int" val="7" /><sval type="int" val="15" /><sval type="int" val="11" /><sval type="int" val="5" /><sval type="int" val="-1" /><sval type="int" val="13" /><sval type="int" val="-2" /><sval type="int" val="11" /><sval type="int" val="-4" /></sval><sval type="array" size="7"><sval type="int" val="155" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="131074" /><sval type="int" val="1" /><sval type="int" val="131074" /><sval type="int" val="7" /></sval><sval type="array" size="3"><sval type="int" val="103" /><sval type="int" val="131075" /><sval type="int" val="10" /></sval></sval><sval type="int" val="0" /><sval type="array" size="14"><sval type="array" size="2"><sval type="int" val="2" /><sval type="int" val="2" /></sval><sval type="array" size="2"><sval type="int" val="7" /><sval type="int" val="2" /></sval><sval type="array" size="2"><sval type="int" val="10" /><sval type="int" val="2" /></sval><sval type="array" size="4"><sval type="int" val="16" /><sval type="int" val="3" /><sval type="int" val="100" /><sval type="string" val="SEARCH" /></sval><sval type="array" size="2"><sval type="int" val="16" /><sval type="int" val="4" /></sval><sval type="array" size="2"><sval type="int" val="16" /><sval type="int" val="2" /></sval><sval type="array" size="2"><sval type="int" val="18" /><sval type="int" val="2" /></sval><sval type="array" size="3"><sval type="int" val="18" /><sval type="int" val="1" /><sval type="string" val="Fly to station" /></sval><sval type="array" size="2"><sval type="int" val="23" /><sval type="int" val="4" /></sval><sval type="array" size="2"><sval type="int" val="24" /><sval type="int" val="4" /></sval><sval type="array" size="2"><sval type="int" val="24" /><sval type="int" val="2" /></sval><sval type="array" size="2"><sval type="int" val="28" /><sval type="int" val="4" /></sval><sval type="array" size="2"><sval type="int" val="28" /><sval type="int" val="2" /></sval><sval type="array" size="2"><sval type="int" val="31" /><sval type="int" val="2" /></sval></sval><sval type="int" val="0" /></sval>
</codearray>
</script>
