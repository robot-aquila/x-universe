<?xml version="1.0" standalone="yes" ?>
<?xml-stylesheet href="x2script.xsl" type="text/xsl" ?>
<script>
<name>wwsl.nav.insector</name>
<version>2000</version>
<engineversion>33</engineversion>
<description>Navigation within the sector</description>
<arguments>
<argument index="1" name="Target" type="Value" desc="Target object" />
<argument index="2" name="Precision" type="Var/Number" desc="Precision m." />
</arguments>
<sourcetext>
<line linenr="001" indent=""><text>goto&#160;label&#160;</text><var>RUN</var></line>
<line linenr="002" indent=""></line>
<line linenr="003" indent=""><var>main</var><text>:</text></line>
<line linenr="004" indent=""><var>skip&#160;if&#160;</var><var>$Target&#160;-&gt;</var><text>&#160;exists</text></line>
<line linenr="005" indent="&#160;"><text>endsub</text></line>
<line linenr="006" indent=""><var>if&#160;not&#160;</var><var>$Target&#160;-&gt;</var><text>&#160;is&#160;in&#160;same&#160;sector&#160;as&#160;</text><var>[THIS]</var></line>
<line linenr="007" indent="&#160;"><var>$Result&#160;=&#160;</var><var>FLRET_WARPED</var></line>
<line linenr="008" indent="&#160;"><text>endsub</text></line>
<line linenr="009" indent=""><text>end</text></line>
<line linenr="010" indent=""><var>$Result&#160;=&#160;</var><var>FLRET_ERROR</var></line>
<line linenr="011" indent=""><var>if&#160;</var><text>&#160;is&#160;datatyp[&#160;</text><var>$Target</var><text>&#160;]&#160;==&#160;</text><var>DATATYP_SHIP</var></line>
<line linenr="012" indent="&#160;"><var>skip&#160;if&#160;not&#160;</var><var>$Target&#160;-&gt;</var><text>&#160;is&#160;docked</text></line>
<line linenr="013" indent="&#160;&#160;"><text>endsub</text></line>
<line linenr="014" indent=""><text>end</text></line>
<line linenr="015" indent=""><var>if&#160;not&#160;</var><var>$Precision</var></line>
<line linenr="016" indent="&#160;"><var>skip&#160;if&#160;</var><var>$Target&#160;-&gt;</var><text>&#160;is&#160;docking&#160;possible&#160;of&#160;</text><var>[THIS]</var></line>
<line linenr="017" indent="&#160;&#160;"><text>endsub</text></line>
<line linenr="018" indent="&#160;"><var>skip&#160;if&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;is&#160;docking&#160;allowed&#160;at&#160;</text><var>$Target</var></line>
<line linenr="019" indent="&#160;&#160;"><text>endsub</text></line>
<line linenr="020" interruptable="@" indent="&#160;"><var>$Retval&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;fly&#160;to&#160;station&#160;</text><var>$Target</var></line>
<line linenr="021" indent=""><text>else</text></line>
<line linenr="022" indent="&#160;"><var>$Distance.Init&#160;=&#160;</var><text>get&#160;distance&#160;between&#160;</text><var>[THIS]</var><text>&#160;and&#160;</text><var>$Target</var></line>
<line linenr="023" interruptable="@" indent="&#160;"><var>$Retval&#160;=&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;follow&#160;</text><var>$Target</var><text>&#160;with&#160;precision&#160;</text><var>$Precision</var><text>&#160;m&#160;:&#160;timeout=</text><var>300000</var><text>&#160;ms</text></line>
<line linenr="024" indent=""><text>end</text></line>
<line linenr="025" indent=""><var>skip&#160;if&#160;</var><var>$Target&#160;-&gt;</var><text>&#160;exists</text></line>
<line linenr="026" indent="&#160;"><text>endsub</text></line>
<line linenr="027" indent=""><var>if&#160;not&#160;</var><var>$Target&#160;-&gt;</var><text>&#160;is&#160;in&#160;same&#160;sector&#160;as&#160;</text><var>[THIS]</var></line>
<line linenr="028" indent="&#160;"><var>$Result&#160;=&#160;</var><var>FLRET_WARPED</var></line>
<line linenr="029" indent=""><var>else&#160;if&#160;</var><var>$Retval</var><text>&#160;</text><var>==</var><text>&#160;</text><var>FLRET_BREAK</var><text>&#160;</text><var>OR</var><text>&#160;</text><var>$Retval</var><text>&#160;</text><var>==</var><text>&#160;</text><var>FLRET_INTERRUPTED</var></line>
<line linenr="030" indent="&#160;"><var>$Result&#160;=&#160;</var><var>FLRET_NEXTFLIGHTSTEP</var></line>
<line linenr="031" indent=""><var>else&#160;if&#160;</var><var>$Retval</var><text>&#160;</text><var>==</var><text>&#160;</text><var>FLRET_TARGETREACHED</var></line>
<line linenr="032" indent="&#160;"><var>$Result&#160;=&#160;</var><var>FLRET_TARGETREACHED</var></line>
<line linenr="033" indent=""><var>else&#160;if&#160;</var><var>$Retval</var><text>&#160;</text><var>==</var><text>&#160;</text><var>FLRET_LANDED</var></line>
<line linenr="034" indent="&#160;"><var>$Result&#160;=&#160;</var><var>FLRET_LANDED</var></line>
<line linenr="035" indent=""><var>else&#160;if&#160;</var><var>$Precision</var><text>&#160;</text><var>AND</var><text>&#160;</text><var>$Retval</var><text>&#160;</text><var>==</var><text>&#160;</text><var>FLRET_TIMEOUT</var></line>
<line linenr="036" indent="&#160;"><var>$Distance.Curr&#160;=&#160;</var><text>get&#160;distance&#160;between&#160;</text><var>[THIS]</var><text>&#160;and&#160;</text><var>$Target</var></line>
<line linenr="037" indent="&#160;"><var>skip&#160;if&#160;</var><var>$Distance.Init</var><text>&#160;</text><var>&gt;=</var><text>&#160;</text><var>$Distance.Curr</var></line>
<line linenr="038" indent="&#160;&#160;"><var>$Result&#160;=&#160;</var><var>FLRET_NEXTFLIGHTSTEP</var></line>
<line linenr="039" indent=""><text>end</text></line>
<line linenr="040" indent=""><text>endsub</text></line>
<line linenr="041" indent=""></line>
<line linenr="042" indent=""><var>RUN</var><text>:</text></line>
<line linenr="043" indent=""><var>$Result&#160;=&#160;</var><var>FLRET_ERROR</var></line>
<line linenr="044" indent=""><text>gosub&#160;</text><var>main</var></line>
<line linenr="045" indent=""><text>return&#160;</text><var>$Result</var></line>
</sourcetext>
<codearray>
<sval type="array" size="10"><sval type="string" val="wwsl.nav.insector" /><sval type="int" val="33" /><sval type="string" val="Navigation within the sector" /><sval type="int" val="2000" /><sval type="int" val="0" /><sval type="array" size="6"><sval type="string" val="Target" /><sval type="string" val="Precision" /><sval type="string" val="Result" /><sval type="string" val="Retval" /><sval type="string" val="Distance.Init" /><sval type="string" val="Distance.Curr" /></sval><sval type="array" size="43"><sval type="array" size="2"><sval type="int" val="100" /><sval type="int" val="39" /></sval><sval type="array" size="2"><sval type="int" val="101" /><sval type="string" val="main" /></sval><sval type="array" size="4"><sval type="int" val="706" /><sval type="int" val="131074" /><sval type="int" val="0" /><sval type="int" val="-536869881" /></sval><sval type="array" size="1"><sval type="int" val="1168" /></sval><sval type="array" size="6"><sval type="int" val="733" /><sval type="int" val="131074" /><sval type="int" val="0" /><sval type="int" val="-536869116" /><sval type="int" val="131075" /><sval type="int" val="1" /></sval><sval type="array" size="7"><sval type="int" val="104" /><sval type="int" val="2" /><sval type="int" val="1" /><sval type="int" val="19" /><sval type="int" val="3" /><sval type="int" val="1" /><sval type="int" val="-1" /></sval><sval type="array" size="1"><sval type="int" val="1168" /></sval><sval type="array" size="7"><sval type="int" val="104" /><sval type="int" val="2" /><sval type="int" val="1" /><sval type="int" val="19" /><sval type="int" val="6" /><sval type="int" val="1" /><sval type="int" val="-1" /></sval><sval type="array" size="6"><sval type="int" val="125" /><sval type="int" val="-1610609917" /><sval type="int" val="131074" /><sval type="int" val="0" /><sval type="int" val="20" /><sval type="int" val="65542" /></sval><sval type="array" size="4"><sval type="int" val="745" /><sval type="int" val="131074" /><sval type="int" val="0" /><sval type="int" val="-1610609912" /></sval><sval type="array" size="1"><sval type="int" val="1168" /></sval><sval type="array" size="7"><sval type="int" val="104" /><sval type="int" val="-536866300" /><sval type="int" val="1" /><sval type="int" val="131074" /><sval type="int" val="1" /><sval type="int" val="1" /><sval type="int" val="-1" /></sval><sval type="array" size="6"><sval type="int" val="746" /><sval type="int" val="131074" /><sval type="int" val="0" /><sval type="int" val="-536867321" /><sval type="int" val="131075" /><sval type="int" val="1" /></sval><sval type="array" size="1"><sval type="int" val="1168" /></sval><sval type="array" size="6"><sval type="int" val="513" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="-536866809" /><sval type="int" val="131074" /><sval type="int" val="0" /></sval><sval type="array" size="1"><sval type="int" val="1168" /></sval><sval type="array" size="6"><sval type="int" val="501" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="3" /><sval type="int" val="131074" /><sval type="int" val="0" /></sval><sval type="array" size="2"><sval type="int" val="112" /><sval type="int" val="20" /></sval><sval type="array" size="6"><sval type="int" val="738" /><sval type="int" val="4" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="131074" /><sval type="int" val="0" /></sval><sval type="array" size="10"><sval type="int" val="563" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="3" /><sval type="int" val="131074" /><sval type="int" val="0" /><sval type="int" val="131074" /><sval type="int" val="1" /><sval type="int" val="4" /><sval type="int" val="300000" /></sval><sval type="array" size="4"><sval type="int" val="706" /><sval type="int" val="131074" /><sval type="int" val="0" /><sval type="int" val="-536865273" /></sval><sval type="array" size="1"><sval type="int" val="1168" /></sval><sval type="array" size="6"><sval type="int" val="733" /><sval type="int" val="131074" /><sval type="int" val="0" /><sval type="int" val="-536864508" /><sval type="int" val="131075" /><sval type="int" val="1" /></sval><sval type="array" size="7"><sval type="int" val="104" /><sval type="int" val="2" /><sval type="int" val="1" /><sval type="int" val="19" /><sval type="int" val="3" /><sval type="int" val="1" /><sval type="int" val="-1" /></sval><sval type="array" size="2"><sval type="int" val="112" /><sval type="int" val="38" /></sval><sval type="array" size="25"><sval type="int" val="104" /><sval type="int" val="-1610605563" /><sval type="int" val="7" /><sval type="int" val="131074" /><sval type="int" val="3" /><sval type="int" val="19" /><sval type="int" val="8" /><sval type="int" val="15" /><sval type="int" val="0" /><sval type="int" val="131074" /><sval type="int" val="3" /><sval type="int" val="19" /><sval type="int" val="7" /><sval type="int" val="15" /><sval type="int" val="0" /><sval type="int" val="15" /><sval type="int" val="10" /><sval type="int" val="7" /><sval type="int" val="-1" /><sval type="int" val="0" /><sval type="int" val="-2" /><sval type="int" val="10" /><sval type="int" val="-4" /><sval type="int" val="0" /><sval type="int" val="-5" /></sval><sval type="array" size="7"><sval type="int" val="104" /><sval type="int" val="2" /><sval type="int" val="1" /><sval type="int" val="19" /><sval type="int" val="11" /><sval type="int" val="1" /><sval type="int" val="-1" /></sval><sval type="array" size="2"><sval type="int" val="112" /><sval type="int" val="38" /></sval><sval type="array" size="13"><sval type="int" val="104" /><sval type="int" val="-1610604795" /><sval type="int" val="3" /><sval type="int" val="131074" /><sval type="int" val="3" /><sval type="int" val="19" /><sval type="int" val="10" /><sval type="int" val="15" /><sval type="int" val="0" /><sval type="int" val="3" /><sval type="int" val="-1" /><sval type="int" val="0" /><sval type="int" val="-2" /></sval><sval type="array" size="7"><sval type="int" val="104" /><sval type="int" val="2" /><sval type="int" val="1" /><sval type="int" val="19" /><sval type="int" val="10" /><sval type="int" val="1" /><sval type="int" val="-1" /></sval><sval type="array" size="2"><sval type="int" val="112" /><sval type="int" val="38" /></sval><sval type="array" size="13"><sval type="int" val="104" /><sval type="int" val="-1610604027" /><sval type="int" val="3" /><sval type="int" val="131074" /><sval type="int" val="3" /><sval type="int" val="19" /><sval type="int" val="2" /><sval type="int" val="15" /><sval type="int" val="0" /><sval type="int" val="3" /><sval type="int" val="-1" /><sval type="int" val="0" /><sval type="int" val="-2" /></sval><sval type="array" size="7"><sval type="int" val="104" /><sval type="int" val="2" /><sval type="int" val="1" /><sval type="int" val="19" /><sval type="int" val="2" /><sval type="int" val="1" /><sval type="int" val="-1" /></sval><sval type="array" size="2"><sval type="int" val="112" /><sval type="int" val="38" /></sval><sval type="array" size="19"><sval type="int" val="104" /><sval type="int" val="-1610603003" /><sval type="int" val="5" /><sval type="int" val="131074" /><sval type="int" val="1" /><sval type="int" val="131074" /><sval type="int" val="3" /><sval type="int" val="19" /><sval type="int" val="12" /><sval type="int" val="15" /><sval type="int" val="0" /><sval type="int" val="15" /><sval type="int" val="9" /><sval type="int" val="5" /><sval type="int" val="-1" /><sval type="int" val="9" /><sval type="int" val="-2" /><sval type="int" val="0" /><sval type="int" val="-3" /></sval><sval type="array" size="6"><sval type="int" val="738" /><sval type="int" val="5" /><sval type="int" val="131075" /><sval type="int" val="1" /><sval type="int" val="131074" /><sval type="int" val="0" /></sval><sval type="array" size="13"><sval type="int" val="104" /><sval type="int" val="-536861177" /><sval type="int" val="3" /><sval type="int" val="131074" /><sval type="int" val="4" /><sval type="int" val="131074" /><sval type="int" val="5" /><sval type="int" val="15" /><sval type="int" val="4" /><sval type="int" val="3" /><sval type="int" val="-1" /><sval type="int" val="4" /><sval type="int" val="-2" /></sval><sval type="array" size="7"><sval type="int" val="104" /><sval type="int" val="2" /><sval type="int" val="1" /><sval type="int" val="19" /><sval type="int" val="11" /><sval type="int" val="1" /><sval type="int" val="-1" /></sval><sval type="array" size="1"><sval type="int" val="1168" /></sval><sval type="array" size="2"><sval type="int" val="101" /><sval type="string" val="RUN" /></sval><sval type="array" size="7"><sval type="int" val="104" /><sval type="int" val="2" /><sval type="int" val="1" /><sval type="int" val="19" /><sval type="int" val="6" /><sval type="int" val="1" /><sval type="int" val="-1" /></sval><sval type="array" size="2"><sval type="int" val="1167" /><sval type="int" val="1" /></sval><sval type="array" size="3"><sval type="int" val="103" /><sval type="int" val="131074" /><sval type="int" val="2" /></sval></sval><sval type="array" size="2"><sval type="array" size="2"><sval type="int" val="9" /><sval type="string" val="Target object" /></sval><sval type="array" size="2"><sval type="int" val="10" /><sval type="string" val="Precision m." /></sval></sval><sval type="array" size="7"><sval type="array" size="2"><sval type="int" val="1" /><sval type="int" val="2" /></sval><sval type="array" size="2"><sval type="int" val="7" /><sval type="int" val="4" /></sval><sval type="array" size="2"><sval type="int" val="11" /><sval type="int" val="4" /></sval><sval type="array" size="2"><sval type="int" val="18" /><sval type="int" val="5" /></sval><sval type="array" size="2"><sval type="int" val="20" /><sval type="int" val="4" /></sval><sval type="array" size="2"><sval type="int" val="38" /><sval type="int" val="4" /></sval><sval type="array" size="2"><sval type="int" val="39" /><sval type="int" val="2" /></sval></sval><sval type="int" val="0" /></sval>
</codearray>
</script>
