v3.01 от 2013-12-XX

TODO (local):
(fixed) Проверить как летит в дальний рейс, когда резерва не хватает для
  прыжка к целевому сектору, но хватает до промежуточной заправки. Походу не
  прыгает до самой дальней возможной заправки.
(fixed) При копировании не копировать количество батареек.
(fixed) Убрать ограничение по классу при формировании списка кораблей источников
  для копирования.
(fixed) Нельзя сбросить резерв под прыжковый двиг указанием значения 0.
(fixed) Отменить дозаправку при отсутствии прыжкового двига или отключенном
  автопрыжке.
(fixed) При копировании если список пуст и ничего не было выбрано (нажата Esc),
  то после копирования null в атрибутах получается. Походу проверку добавить
  выбрано/не выбрано не копировать.
(fixed) Поработать с периодом ожидания процедуры idle.
(fixed) Проверить, как работает навигатор для случая с трансорбитальными
  ускорителями. Простым скриптом с указанием врат такого типа прыжок
  совершается. Видимо такие врата только выбрать нельзя через карту, а прыгать
  можно. PS. Исправлено и оттестировано в AP.
(fixed) Настройки минимального количества поставщика/потребителя не копируются.
  копируются, но как то через раз. Проверить на новом транспорте.
(fixed) Нужна возможность отключать фазу покупки или продажи путем указания null
  цены. Иначе, ситуация, когда на военной заставе мины по макс. цене, он стоит
  их покупает и продает в бесконечном цикле.
(fixed) Переделать обработчик сигнала ATTACKED таким образом, что бы он
  восстанавливал стандартное поведение, если на стеке не запущен дроид.
(fixed) После переделки блокировки, теперь при обслуживании из списков дальние
  станции опустевают. Тут нужно хорошо поразмыслить, нужно ли что то менять. В
  принципе, такой эффект добавляет интереса: это не рутина, а требующая
  организационного решения задача.
(fixed) Вывод субтитров при включенном журналировании.
(fixed) Шефу добавить сброс/установку журналирования для всех подчиненных.
(fixed) При подсчете количества поставщиков/потребителей учитывать флаг
  "работать только со списками".
(fixed) f530 убрать выбор текущего товара. Вообще, продумать что делать при
  копировании.
(fixed) В валидатор покупателя добавить проверку наличия у станции денег для
  покупки.
(fixed) Навигатор работает некорректно: при отсутствии места для дозаправки
  долбится на заправку.
(fixed) В списке товаров текущий товар убрать. Цветовая индикация текущего
  режима работы с товаром.
(fixed) В деталях товара убрать пункты: сделать текущим.
(fixed) Быстрое добавление товаров: Добавить продукты станции, Добавить ресурсы
  станции, Добавить все товары станции.
(fixed) После добавления или удаления товара отсортировать список по
  наименованию.
(fixed) Тупо не проверяет возможность купить/продать товар прямо на месте, летит
  черте куда. Сделать добавив валидацию и попытку продажи. При валидном и
  нулевом результате лететь на другую станцию. Иначе искать станцию как обычно.
(fixed) В списке товаров рядом с товаром в скобках для шефа показывать суммарно
  в моменте колво на всех кораблях, для транспорта в трюме.
(fixed) Навигатор поправить срочно. Выбирает заправки недоступные по рейтингу и
  висит над ними бесконечно.
(fixed) Товары категории 3 отклоняются из-за естественного отсутствия спроса.
(fixed) Проверить новую версию навигатора. Тесты:
  1) Прыжок на попутную заправку при резерве меньшем, чем требуется до цели (+)
  2) На попутную заправку к ближайшим от заправки воротам (+)
(fixed) Для удаления ненужных файлов сначала нужно пофиксить nav.move. Затем можно
  пробовать удалять (с перепроверкой каждого скрипта).
(fixed) При копировании настроек с другого корабля отфильтровать подчиненных в
  списке.
(fixed) Предусмотреть раздельное копирование только настроек товара, только
  рабочей области или общее копирование настроек.
(fixed) Дополнительные действия добавить:
  +PauseJob, +ResumeJob, +KillJob, +Restart, ?FinishJob
(fixed) Срочно: В обработчик сигнала KILLED добавить подчистку кэша
  Program -> Ship. Если уничтоженный под управлением, то сразу удалить его из
  списка подчиненных.
(fixed) Как этап решения проблемы объединения в комплекс, оптимизировать работу
  с комплексами:  при отборе станций сектора, отсеивать входящие в комплекс (они
  все равно будут недоступны для стыковки и дадут некорректный рассчет
  спроса/предложения при отсутствии валидатора 16). Нужна функция, которая
  построит кэш станций сектора в комплексах (для быстрой фильтрации).
(fixed) Список дополнительных/запрещенных секторов переработать: перенести в
  скрипт КТ, добавить сортировку.
(fixed) Интерфейсы редактирования списка поставщиков/потребителей перенести в
  скрипт КТ, исправить ошибки условного формирования, добавить сортировку.
(fixed) Срочно: проверить как работает, при объединении станции из списка в
  новый комплекс. Наименование вроде меняется (проверить). Если такие станции
  становятся недоступными и никак это пофиксить нельзя, то описать это в
  документации. PS: не получается выделить станцию в комплексе что бы проверить.
  По этому< нужно сначала добавить в список, а затем объединять в комплекс и
  провенрять. PPS: Команды секторов и галактики -> get all stationary objects
  (в самом низу) позволяет получить список станций в комплексе. Признак, по
  которому можно определить хотя бы факт вхождения в комплекс пока неизвестен.
(fixed) Сильно загрузить и проверить: похоже, подтормаживает на процедуре поиска
  товаров категорий 1/2. Можно так же спрос в моменте добавить и по его
  отработке смотреть. Еще потенциальный кандидат на проверку это ранжирование
  станций (возможно определение дистанции, хотя с ПД сомнительно).
(fixed) Не учтен момент в корректировке спроса: когда в собственном трюме есть
  товара, в количестве большем или равном реальному спросу, то такой товар не
  попадает в первую категорию, так как итоговый спрос дает ноль или меньше. И
  корабль с полным трбмом сидит и ждет появление спроса. А если в рабочей
  области в принципе нет потребителя на такой объем, то корабль никогда не
  разгрузится.
(fixed) Перестал дозаправляться при старте с собственных станций (после
  реализации загрузки с корабля и добавления в навигацию возможности следования
  к кораблю).
(fixed) Добавить валидацию рабочей области для контрагентов-кораблей.
(fixed) Использование любых кораблей в качестве поставщиков и покупателей.
(fixed) ГТ: В менюшках Создать группу и Добавить транспорт корабли без кодов
  отображаются.
(fixed) Выбор товара читерский интерфейс заменить на собственный, только для
  известных товаров.
(fixed) Формирование списков поставщиков/покупателей выполняется медленно из-за
  расставленных замедлителей (видимо в процедуре поиска контрагентов).
  Нужно там режим быстрой выборки при открытом корабельном терминале
  предусмотреть.
(fixed) Убрать сортировку массива товаров после добавления. Сделать сортировку
  только для формирования списка (иначе трудно формировать список
  автоматически).
(fixed) В навигаторе проверить что ближайшие ворота ищутся известные игроку,
  что бы не открывал читерски. И использовать флаг JumpableGate при поиске врат.
(test) Добавить программу Старатель.
(fixed) При переключении на старателя в КТ убрать опцию редактирования списка
  поставщиков.
(test) f530/f510 копирование товаров для старателя фильтрацию сделать.
? Нужна проверка наличия сборщика руды для запуска старателя. Лучше всего это
  добавить непосредственно в скрипте wwsl.T2.miner.run.
? В ГТ список одиночек теперь должен включать корабли с любой программой, кроме
  шефа. И тексты поправить соответствующим образом.
? В навигаторе дозаправку через скрипт загрузки сделать, а скрипт загрузки
  доработать, что бы позволял загружать ресурсы с собственных станций.
  А проверка возможности полностью на валидаторах.
? ГТ: В процессе добавления транспорта или шефа, при запросе на запуск программы
  (при закрытии меню) добавить проверку, что программа была выбрана выбрана,
  а не отменена.
? Добавить куда нибудь информацию об рабочем объеме трюма и максимальном. А так
  же количество в единицах для лимитов.
? При загрузке/разгрузке кораблей 15 секундная пауза (там где вывод субтитров)
  может быть чревата аварией. Нужно заменить паузу в космосе на move around,
  что бы отрабатывали прерывания.
? Все круто, только указывать Min2Buy/Min2Sell очень неудобно угадывать сколько
  там. Добавить рядом с %% количество в единицах.
? Шефу добавить опцию передачи управления кораблями другому шефу.
? В документации указать в качестве примера несколько товаров и несколько разных
  типов кораблей в группе при задействованном лимите на минимальные партии
  корабли с очень большим трюмом не находят подходящего контрагента и везут
  батареи. Более быстрые и менее объемные корабли везут более
  высокотехнологичный и дорогой товар.
? Для X-Tended проблема: в доках покупают только расовое оружие. Однако, при
  опросе дока на предмет покупки иного оружия выдается положительный ответ.
  Все это приводит к тому, что корабль бесконечно пытается продать оружие
  на станции которая говорит что покупает, но при попытке продать, не берет.
  Походу работает на событиях, так как после операции возвращает корректное
  количество, но после товар возвращается в трюм. Поскольку это откровенный
  тупизм, то изголяться смысла не вижу. Или отключать или настраивать маршруты.
  Как распознать при включенном плагине: в один прекрасный момент начинает
  бесконечно повторять "Продукты не покупаются" - значит где то зависон. 
? В доке обязательно предупредить: если ты указываешь min to buy/min to sell
  100%, то убедись, что в трюме нет вообще никакого барахла, кроме оборудования.
  Если вдруг отключается автопрыжок, то даже одна батарейка в трюме уже барахло,
  которая не даст 100% рабочего трюма. Или если размер резерва уменьшился, а в
  трюме остались баты, то же самое будет. Вообще нужно как то это индицировать.
  Особенно внимательно нужно быть с оборудованием: например, можно проглядеть
  неустановленный щит.
? В доку добавить, что в XTM можно возить грузы TL-ом можду комплексами. То есть
  достаточно обеспечить шахты возможностью стыковки для TL и можно развозить
  ресурсы большими партиями.
? Проверить, что-то не понятно с min2buy/min2sell=0%. Вроде как не хотят даже
  затариваться. Ну и сидит один с 20 ед. в трюме не продает. Да, есть косяк
  (2 дополнительных подтверждения).
? В статус корабля независимо от программы добавить текущее местоположение и
  назначение.
? Почему осетр не покупает XXL Гигантский Барьерный щит? Все дело было в
  настройках цены, на которую внимания не обратил. Нужно добавить цветовую
  индикацию: Красным подчеркивать труднодостижимые цены. То есть, если для
  закупочной указана минимальная и если для реализации указана максимальная цена
  товара.
? Стандартный обработчик SIGNAL_ATTACKED трейдера не подходит. Например, в
  случае инцидента в ксенонском секторе будет ждать бесконечно, когда он от
  врагов очистится.
? В документации поправить о прыжковом двигателе. Нужен новый скриншот отчета.
  Или не нужен, если перепилить его в интерфейсе.
? Так же добавить ограничения на цены: нельзя не указывать обе и нельзя
  указывать обе одинаковые (в документации дополнительно объяснить почему).
  UPD (еще размышляю): Не указывать обе можно. Это будет означать временное
  выключение товара из работы. Но когда обе одинаковые, то нужно как то
  гарантировать отсутствие ситуаций "у тебя купил, тут же тебе продал и так
  до бесконечности". Вариант в качестве затравки: попробовать делать это через
  количество. То есть требовать, либо цены разные (в правильную сторону), либо
  указывай разницу через количество так, что бы на торговых станциях бесконечно
  по кругу не гонять. 
? В доке отметить, что обработчики сигналов назначаются при смене программы.
  При отмене программы обработчики сигналов восстанавливаются на дефолтные.
  Это позволяет использовать реакцию T2 Дроида в случае работы сторонних
  программ.
? f616 доработать. Работает крайне странно: при тестах отправлял только на
  торговые станции, хотя ближе гораздо больше доступных станций.
? В очередной раз зависон с бесконечной продажей/покупкой на торговой станции.
  Десять раз подумать как это разрулить! Как вариант: просто предупреждать,
  когда цена реализации ниже закупочной. Жалко, что в булев диалог много текста
  не засунуть.
? Проверить как работает сортировка секторов и станций в списках КТ с
  раскрашенными секторами.
? В списках КТ неизвестные секторы неплохо было бы уточнять рядом с какими они
  находятся. Хотя как определить какой сектор неизвестный. По расе для XTM по кр
  мере не получится. Можно попробовать по core/border: у неизвестных они не
  заданы.
? В параметрах товара если программа не выбрана или не предусматривает лимиты
  объема и партии, то не отображать. 
? В доке описать как скопировать настройки транспорта на шефа или придумать что
  то в интерфейсе.


TODO:

? Переделать, что бы в настройках отображалась статистика. Добавить почасовую
  стату.
? Добавить настройки объема собственного трюма, которые определяют момент
  перехода от закупки к реализации и обратно.
? Дополнительные функции при уничтожении корабля?
? Приостановить рейс.
? Скрипт инициализации теперь без префикса !. В случае обновления, нужно удалить
  файл !setup.plugin.T2.xml из папки scripts, затем скопировать файлы последней
  версии с перезаписью. Но вместо него добавлен !init.T2.set.mod.xml, который
  делает игру модифицированной и позволяет отработать скрипту инициализации.
? Добавить прыжки к навигационным маякам.
