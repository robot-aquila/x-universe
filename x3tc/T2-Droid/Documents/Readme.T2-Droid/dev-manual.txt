v3.01

TODO: Сигналы SELLWARE/BUYWARE работают! Нужно на них учет вешать.
Агрументы обработчика: Станция, Товар, количество, цена за ед.
Эти сигналы работают даже на операциях, совершаемых игроком!

Глобальные переменные:

wwsl.T2.lastShipNumber - номер последнего переименованного корабля

Локальные переменные:

wwsl.T2.config - указывает на структуру типа ShipStruct

Формула ранжирования товаров для ротации:

  Ранжирование товаров по формуле выполняется, если есть хотя бы 1 поставщик и
  1 покупатель. Что делать с теми товарами, для которых отключена закупка или
  продажа, пока неясно.
  
Примечание: считать объемы вместо кол-ва поставщиков и покупателей не подходит,
так как например для доков требуемый объем будет меньше, а это снизит приоритет.
  
	1) Нужно выразить стремление к отношению покупатель/поставщик равное 1.
	   Значения меньше единицы означают, что сбыть товар будет сложнее.
	   Значения больше единицы означают, что могут возникнуть сложность с
	   закупкой.
	    
	2) При прочих равных, приоритет следует отдавать тем маршрутам, на которых
	   общее количество контрагентов больше. 
	
	(Consumers / Suppliers) ^ 2 * (Consumers + Suppliers)

	Солярка + 10:		(10 / 1) ^ 2 * (10 + 1) = 1100 
	2 Солярки + 10:		(10 / 2) ^ 2 * (10 + 2) = 300
	5 Солярок + 10:		(10 / 5) ^ 2 * (10 + 5) = 60
	10 Челты + 1:		(1 / 10) ^ 2 * (1 + 10) = 0.11
	10 Челты + 5:		(5 / 10) ^ 2 * (5 + 10) = 3.75
	80 Челты + 40:		(40 / 80) ^ 2 * (40 + 80) = 30 
	5 Растарки + 15:	(15 / 5) ^ 2 * (15 + 5) = 180
	80 Растарки + 20:	(20 / 80) ^ 2 * (20 + 80) = 6.25
	
	Адаптированная для движка формула:

	factor = Consumers * 100 / Suppliers
	factor * factor * (Consumers + Suppliers) / 10000 	
	
	Солярка + 10:		10 * 100 / 1 * 10 * 100 / 1 * (10 + 1) / 10000 =  
	2 Солярки + 10:		 = 300
	5 Солярок + 10:		 = 60
	10 Челты + 1:		 = 0.11
	10 Челты + 5:		 = 3.75
	80 Челты + 40:		 = 30
	5 Растарки + 15:	 = 180
	80 Растарки + 20:	 = 6.25


Формула ранжирования целевых станций:
  
    (3600 - ВремяПредОтпр) * Дистанция / 3600 + Дистанция
   
Где:
- ВремяПредОтпр - время с момента начала аналогичной операции другим кораблем.
  Если это значение превышает час или предыдущее отправление на станцию совершил
  этот же корабль, то берется час т.е. 3600.
- Дистанция - дистанция километров до целевой станции с учетом расстояния
  между всеми промежуточными воротами по маршруту. Для кораблей с ПД
  дистанция определяется расстоянием от ближайших к станции врат.

--------------------------------------------------------------------------------

Базовые структуры данных представлены одномерными массивами. Высокоуровневые
структуры данных могут содержать вложенные массивы. Ниже описаны существующие
структуры данных с расшифровкой значений элементов.

WareStruct Параметры работы с товаром:
 0 - WareStruct-3.01
 1 - товар
 2 - закупочная цена (null - закупка отключеня)
 3 - цена реализации (null - реализация отключена)
 4 - лимит мин. партии для покупки (% от суммарного места под товар в
     трюме*, null - отключен)
 5 - лимит мин. партии для продажи (аналогично 3)
 6 - необходимая для начала рейса минимальная заполненность склада поставщика
     (% от склада станции, null - проверка отключена)
 7 - максимальная заполненность склада потребителя (аналогично 5)
 
* Суммарное место под товар в трюме определяется как объем, уже занятый товаром,
плюс свободный объем трюма за вычетом объема, необходимого для полной дозаправки


WorkspaceStruct Параметры рабочей области:
 0 - WorkspaceStruct-3.01
 1 - центральный сектор
 2 - радиус рабочей области в прыжках
 3 - флаги*
 4 - массив дополнительных секторов
 5 - массив запрещенных секторов
 6 - массив станций-поставщиков
 7 - массив станций-потребителей
 8 - массив запрещенных станций
 
* флаги
1 - работать только со станциями из списков


StatStruct статистика:
 0 - StatStruct-3.01
 1 - временная метка (интерпретируется в зависимости от контекста)
 2 - суммарное время работы (здесь и далее секунд)
 3 - суммарное время простоя
 4 - время на закупках/загрузках
 5 - время на продажах/разгрузках
 6 - время ожидания поставщика
 7 - время ожидания потребителя
 8 - сумма закупки
 9 - сумма реализации
10 - затраты на обслуживание


ShipStruct конфигурация корабля:
 0 - ShipStruct-3.01
 1 - код программы
 2 - флаги*
 3 - руководитель (если корабль под руководством другого)
 4 - текущий статус работы**
 5 - WorkspaceStruct
 6 - WareStruct
 7 - StatStruct (сводная статистика по работе)
 8 - массив StatStruct
 9-10 в зависимости от программы
 Для транспорта:
	 9 - не используется
	10 - массив WareStruct
 Для шефа:
	 9 - массив кораблей в управлении
	10 - массив WareStruct
 
* флаги
1 - журналирование
2 - разрешить апгрейд
4 - разрешить ремонт
8 - переименован

** статус работы
0 - работает
1 - приостановлен
2 - завершить и сообщить


Меню----------------------------------------------------------------------------

Меню разбито на две части: действия и конфигурация. Набор доступных действий
зависит от текущего статуса корабля и настроек. Если в текущий момент недоступно
ни одно из  действий, то раздел не отображается.

Меню действий может содержать один или комбинацию пунктов (в зависимости от
текущего состояния):

Начать работу
Приостановить
Вернуться к работе
Завершить и сообщить
Прервать
Сменить программу

Главное меню программы: Транспорт

> Список товаров (Х шт.)
Центральный сектор: %s|Выбрать центральный сектор
Радиус рабочей области в прыжках: %s|Указать радиус рабочей области
Список дополнительных секторов (%s шт.)
Список запрещенных секторов (%s шт.)
Список поставщиков (%s шт.)
Список покупателей (%s шт.)
Список запрещенных станций (%s шт.)
Включить обслуживание только станций из списков
Показать статистику
Копировать настройки
Сбросить статистику
Включить|Отключить журналирование
Выход

Диалог редактирования товара:

Товар: %s, средняя цена %s Кр.|Выбрать товар
Цена закупки: %s Кр.|Включить закупку
Цена реализации: %s Кр.|Включить реализацию
Закупать, если у поставщика больше чем: %s% склада|нет ограничений
Продавать, если у потребителя меньше чем: %s% склада|нет ограничений
Мин. партия для покупки: %s% трюма|нет ограничений
Мин. партия для продажи: %s% трюма|нет ограничений

================================================================================

v2.03

Переменные со стандартным префиксом wwsl.T2.:

PROGRAM - current program number 
BP - buying price
SP - selling price
SA - min supplier (seller) qty.
MA - min consumer (buyer) qty.
MTB - min to buy (% of total cargo space available to transport ware)
MTS - min to sell (% of total cargo space available to transport ware)
WF - wait factor
WP - ware
WS - central sector
WJ - jump range
SL - list of sellers (supliers) 
BL - list of buyers (consumers)
DL - list of denied stations
ASL - additional sectors
DSL - denied sectors

SCB - Всего затрачено на покупку
SCS - Всего получено от продажи
STB - Время на закупку
STS - Время на реализацию
SWB - Время ожидания продавца
SWS - Время ожидания покупателя

Переменные с полным именем: 

ww.JumpdriveReserved
