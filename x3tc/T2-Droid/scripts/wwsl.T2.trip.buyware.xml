<?xml version="1.0" standalone="yes" ?>
<?xml-stylesheet href="x2script.xsl" type="text/xsl" ?>
<script>
<name>wwsl.T2.trip.buyware</name>
<version>301</version>
<engineversion>45</engineversion>
<description>T2: Common - Buy ware</description>
<arguments>
<argument index="1" name="WorkspaceStruct" type="Значение" desc="Workspace" />
<argument index="2" name="WareStruct" type="Значение" desc="Ware" />
<argument index="3" name="WantedAmount" type="Перем/Число" desc="Amount (opt.)" />
<argument index="4" name="mode" type="Перем/Число" desc="Mode" />
</arguments>
<sourcetext>
<line linenr="001" indent=""><comment><text>*&#160;</text><var>Summary:</var></comment></line>
<line linenr="002" indent=""><comment><text>*&#160;</text><var>Make&#160;a&#160;trip&#160;to&#160;buy&#160;ware.</var></comment></line>
<line linenr="003" indent=""></line>
<line linenr="004" indent=""><comment><text>*&#160;</text><var>Arguments:</var></comment></line>
<line linenr="005" indent=""><comment><text>*&#160;</text><var>$WorkspaceStruct&#160;-&#160;The&#160;data&#160;structure&#160;that&#160;describes&#160;available&#160;workspace.</var></comment></line>
<line linenr="006" indent=""><comment><text>*&#160;</text><var>See&#160;dev&#160;manual&#160;for&#160;more&#160;details&#160;about&#160;data&#160;structures.</var></comment></line>
<line linenr="007" indent=""><comment><text>*&#160;</text><var>$WareStruct&#160;-&#160;The&#160;data&#160;structure&#160;that&#160;describes&#160;ware&#160;settings.</var></comment></line>
<line linenr="008" indent=""><comment><text>*&#160;</text><var>$WantedAmount&#160;-&#160;Optional&#160;parameter&#160;if&#160;you&#160;want&#160;to&#160;buy&#160;exactly&#160;specified&#160;amount.</var></comment></line>
<line linenr="009" indent=""><comment><text>*&#160;</text><var>If&#160;specified&#160;then&#160;ship&#160;will&#160;try&#160;to&#160;buy&#160;that&#160;specified&#160;amount.</var></comment></line>
<line linenr="010" indent=""><comment><text>*&#160;</text><var>If&#160;unspecified&#160;then&#160;will&#160;try&#160;to&#160;buy&#160;maximum&#160;possible&#160;amount.</var></comment></line>
<line linenr="011" indent=""><comment><text>*&#160;</text><var>$mode&#160;-&#160;buying&#160;mode.&#160;Available&#160;values:</var></comment></line>
<line linenr="012" indent=""><comment><text>*&#160;</text><var>0&#160;(unspecified)&#160;-&#160;default&#160;mode&#160;as&#160;usual:&#160;fly&#160;&amp;&#160;buy</var></comment></line>
<line linenr="013" indent=""><comment><text>*&#160;</text><var>1&#160;-&#160;just&#160;fly</var></comment></line>
<line linenr="014" indent=""><comment><text>*&#160;</text><var>2&#160;-&#160;buy&#160;or&#160;die</var></comment></line>
<line linenr="015" indent=""></line>
<line linenr="016" indent=""><comment><text>*&#160;</text><var>Returns:</var></comment></line>
<line linenr="017" indent=""><comment><text>*&#160;</text><var>Positive&#160;return&#160;value&#160;means&#160;purchased&#160;amount.</var></comment></line>
<line linenr="018" indent=""><comment><text>*&#160;</text><var>Negative&#160;return&#160;value&#160;means&#160;error.&#160;It&#160;may&#160;be&#160;for&#160;many&#160;reasons:</var></comment></line>
<line linenr="019" indent=""><comment><text>*&#160;</text><var>the&#160;ship&#160;cannot&#160;transport&#160;specified&#160;ware,&#160;the&#160;ship&#160;has&#160;no&#160;free&#160;cargo&#160;space,</var></comment></line>
<line linenr="020" indent=""><comment><text>*&#160;</text><var>the&#160;ship&#160;cannot&#160;load&#160;specified&#160;amount&#160;of&#160;ware,&#160;no&#160;station&#160;to&#160;sell,&#160;etc</var></comment></line>
<line linenr="021" indent=""><comment><text>*&#160;</text><var>Possible&#160;error&#160;codes:</var></comment></line>
<line linenr="022" indent=""><comment><text>*&#160;</text><var>-1&#160;-&#160;has&#160;no&#160;cargo&#160;space&#160;to&#160;load&#160;at&#160;least&#160;one&#160;unit&#160;of&#160;ware</var></comment></line>
<line linenr="023" indent=""><comment><text>*&#160;</text><var>-2&#160;-&#160;suitable&#160;supplier&#160;not&#160;found&#160;in&#160;specified&#160;workspace</var></comment></line>
<line linenr="024" indent=""><comment><text>*&#160;</text><var>-3&#160;-&#160;selected&#160;station&#160;has&#160;become&#160;technically&#160;unusable&#160;during&#160;the&#160;route</var></comment></line>
<line linenr="025" indent=""><comment><text>*&#160;</text><var>-4&#160;-&#160;selected&#160;station&#160;has&#160;become&#160;unusable&#160;at&#160;end&#160;of&#160;the&#160;route</var></comment></line>
<line linenr="026" indent=""><comment><text>*&#160;</text><var>-5&#160;-&#160;purchase&#160;prohibited&#160;(null&#160;price)</var></comment></line>
<line linenr="027" indent=""><comment><text>*&#160;</text><var>-6&#160;-&#160;not&#160;enough&#160;cargo&#160;space&#160;(less&#160;than&#160;&quot;%&#160;min.&#160;to&#160;buy&quot;)</var></comment></line>
<line linenr="028" indent=""></line>
<line linenr="029" indent=""><var>$validator=</var><var>63</var></line>
<line linenr="030" indent=""><var>$Ware=</var><var>$WareStruct</var><text>[</text><var>1</var><text>]</text></line>
<line linenr="031" indent=""><var>$Price=</var><var>$WareStruct</var><text>[</text><var>2</var><text>]</text></line>
<line linenr="032" indent=""><var>skip&#160;if</var><var>$Price</var></line>
<line linenr="033" indent="&#160;"><text>return&#160;</text><var>-5</var></line>
<line linenr="034" interruptable="@" indent=""><var>$FreeCargoAmount=</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.function1</call><text>&#160;:&#160;</text><text>&#160;#Fn=</text><var>613</var><text>&#160;</text><text>&#160;arg1=</text><var>$Ware</var></line>
<line linenr="035" indent=""><var>skip&#160;if</var><var>$FreeCargoAmount</var><text>&#160;</text><var>&gt;</var><text>&#160;</text><var>0</var></line>
<line linenr="036" indent="&#160;"><text>return&#160;</text><var>-1</var></line>
<line linenr="037" indent=""><var>$MinWantedAmount=</var><var>1</var></line>
<line linenr="038" indent=""><var>skip&#160;if</var><var>$WantedAmount</var></line>
<line linenr="039" interruptable="@" indent="&#160;"><var>$MinWantedAmount=</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.function1</call><text>&#160;:&#160;</text><text>&#160;#Fn=</text><var>604</var><text>&#160;</text><text>&#160;arg1=</text><var>$WareStruct</var></line>
<line linenr="040" indent=""><var>skip&#160;if</var><var>$MinWantedAmount</var><text>&#160;</text><var>&gt;</var><text>&#160;</text><var>0</var></line>
<line linenr="041" indent="&#160;"><text>return&#160;</text><var>-1</var></line>
<line linenr="042" indent=""><var>skip&#160;if</var><var>$MinWantedAmount</var><text>&#160;</text><var>&lt;=</var><text>&#160;</text><var>$FreeCargoAmount</var></line>
<line linenr="043" indent="&#160;"><text>return&#160;</text><var>-6</var></line>
<line linenr="044" indent=""></line>
<line linenr="045" interruptable="@" indent=""><var>$Sectors=</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.function0</call><text>&#160;:&#160;</text><text>&#160;#Fn=</text><var>1</var></line>
<line linenr="046" indent=""><var>if</var><var>[DOCKEDAT]</var></line>
<line linenr="047" indent="&#160;"><var>$Stations=</var><text>create&#160;new&#160;array,&#160;arguments=</text><var>[DOCKEDAT]</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var><text>,&#160;</text><var>null</var></line>
<line linenr="048" indent=""><text>else</text></line>
<line linenr="049" indent="&#160;"><var>$Stations=</var><var>$WorkspaceStruct</var><text>[</text><var>6</var><text>]</text></line>
<line linenr="050" indent=""><text>end</text></line>
<line linenr="051" indent=""><var>$Dummy.Index=</var><text>size&#160;of&#160;array&#160;</text><var>$Stations</var></line>
<line linenr="052" indent=""><var>while</var><var>$Dummy.Index</var><text>&#160;</text><var>&gt;</var><text>&#160;</text><var>0</var></line>
<line linenr="053" indent="&#160;"><text>dec&#160;</text><var>$Dummy.Index=</var></line>
<line linenr="054" indent="&#160;"><var>$Station=</var><var>$Stations</var><text>[</text><var>$Dummy.Index</var><text>]</text></line>
<line linenr="055" interruptable="@" indent="&#160;"><var>skip&#160;if</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.function1</call><text>&#160;:&#160;</text><text>&#160;#Fn=</text><var>623</var><text>&#160;</text><text>&#160;arg1=</text><var>$Station</var></line>
<line linenr="056" indent="&#160;&#160;"><text>continue</text></line>
<line linenr="057" interruptable="@" indent="&#160;"><var>skip&#160;if</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.function</call><text>&#160;:&#160;</text><text>&#160;#Fn=</text><var>610</var><text>&#160;</text><text>&#160;arg1=</text><var>$validator</var><text>&#160;</text><text>&#160;arg2=</text><var>$Station</var><text>&#160;</text><text>&#160;arg3=</text><var>$WareStruct</var><text>&#160;</text><text>&#160;arg4=</text><var>$MinWantedAmount</var><text>&#160;</text><text>&#160;arg5=</text><var>$Sectors</var></line>
<line linenr="058" indent="&#160;&#160;"><text>continue</text></line>
<line linenr="059" indent=""><comment><text>*&#160;</text><var>In&#160;&quot;just&#160;fly&quot;&#160;mode&#160;we&#160;are&#160;docked&#160;to&#160;the&#160;supplier</var></comment></line>
<line linenr="060" indent=""><comment><text>*&#160;</text><var>Exit&#160;with&#160;success&#160;zero&#160;code</var></comment></line>
<line linenr="061" indent="&#160;"><var>do&#160;if&#160;</var><var>$mode</var><text>&#160;</text><var>==</var><text>&#160;</text><var>1</var></line>
<line linenr="062" indent="&#160;&#160;"><text>return&#160;</text><var>0</var></line>
<line linenr="063" indent="&#160;"><text>gosub&#160;</text><var>TryToBuy</var></line>
<line linenr="064" indent="&#160;"><var>do&#160;if&#160;</var><var>$Amount</var><text>&#160;</text><var>&gt;</var><text>&#160;</text><var>0</var></line>
<line linenr="065" indent="&#160;&#160;"><text>return&#160;</text><var>$Amount</var></line>
<line linenr="066" indent=""><text>end</text></line>
<line linenr="067" indent=""><comment><text>*&#160;</text><var>In&#160;&quot;buy&#160;or&#160;die&quot;&#160;mode&#160;we&#160;had&#160;to&#160;buythe&#160;ware&#160;up&#160;to&#160;this&#160;point</var></comment></line>
<line linenr="068" indent=""><comment><text>*&#160;</text><var>Exit&#160;with&#160;error&#160;code&#160;because&#160;this&#160;didn't&#160;happened</var></comment></line>
<line linenr="069" indent=""><var>do&#160;if&#160;</var><var>$mode</var><text>&#160;</text><var>==</var><text>&#160;</text><var>2</var></line>
<line linenr="070" indent="&#160;"><text>return&#160;</text><var>-4</var></line>
<line linenr="071" indent=""></line>
<line linenr="072" interruptable="@" indent=""><var>$Stations=</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.function4</call><text>&#160;:&#160;</text><text>&#160;#Fn=</text><var>611</var><text>&#160;</text><text>&#160;arg1=</text><var>$validator</var><text>&#160;</text><text>&#160;arg2=</text><var>$WorkspaceStruct</var><text>&#160;</text><text>&#160;arg3=</text><var>$WareStruct</var><text>&#160;</text><text>&#160;arg4=</text><var>$MinWantedAmount</var></line>
<line linenr="073" interruptable="@" indent=""><var>$tDataSorted=</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.function4</call><text>&#160;:&#160;</text><text>&#160;#Fn=</text><var>533</var><text>&#160;</text><text>&#160;arg1=</text><var>'B'</var><text>&#160;</text><text>&#160;arg2=</text><var>$Stations</var><text>&#160;</text><text>&#160;arg3=</text><var>$WareStruct</var><text>&#160;</text><text>&#160;arg4=</text><var>[TRUE]</var></line>
<line linenr="074" indent=""><var>skip&#160;if</var><text>size&#160;of&#160;array&#160;</text><var>$tDataSorted</var></line>
<line linenr="075" indent="&#160;"><text>return&#160;</text><var>-2</var></line>
<line linenr="076" indent=""><var>$Station=</var><var>$tDataSorted</var><text>[</text><var>0</var><text>]</text></line>
<line linenr="077" indent=""></line>
<line linenr="078" indent=""><var>[THIS]&#160;-&gt;</var><text>set&#160;command:&#160;</text><var>COMMAND_GET_WARE</var></line>
<line linenr="079" indent=""><var>[THIS]&#160;-&gt;</var><text>set&#160;wanted&#160;ware&#160;to&#160;</text><var>$Ware</var></line>
<line linenr="080" indent=""><var>[THIS]&#160;-&gt;</var><text>set&#160;destination&#160;to&#160;</text><var>$Station</var></line>
<line linenr="081" indent=""></line>
<line linenr="082" interruptable="@" indent=""><var>=</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.function3</call><text>&#160;:&#160;</text><text>&#160;#Fn=</text><var>502</var><text>&#160;</text><text>&#160;arg1=</text><var>$Station</var><text>&#160;</text><text>&#160;arg2=</text><var>$Ware</var><text>&#160;</text><text>&#160;arg3=</text><var>'B'</var></line>
<line linenr="083" indent=""></line>
<line linenr="084" indent=""><var>$Station.IsAShip=</var><var>$Station&#160;-&gt;</var><text>&#160;is&#160;of&#160;class&#160;</text><var>Корабль</var></line>
<line linenr="085" indent=""><var>if</var><var>$Station.IsAShip</var></line>
<line linenr="086" indent="&#160;"><text>gosub&#160;</text><var>CheckCanExchangeAndGetPrecision</var></line>
<line linenr="087" interruptable="@" indent="&#160;"><var>while&#160;not</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.nav.move</call><text>&#160;:&#160;</text><text>&#160;Target=</text><var>$Station</var><text>&#160;</text><text>&#160;Precision&#160;m.=</text><var>$Precision</var></line>
<line linenr="088" indent="&#160;&#160;"><text>gosub&#160;</text><var>CheckCanExchangeAndGetPrecision</var></line>
<line linenr="089" indent="&#160;&#160;"><var>skip&#160;if</var><var>$CanExchange</var></line>
<line linenr="090" indent="&#160;&#160;&#160;"><text>return&#160;</text><var>-3</var></line>
<line linenr="091" indent="&#160;&#160;"><var>$Station.Sector=</var><var>$Station&#160;-&gt;</var><text>&#160;get&#160;sector</text></line>
<line linenr="092" indent="&#160;&#160;"><var>skip&#160;if</var><text>find&#160;</text><var>$Station.Sector</var><text>&#160;in&#160;array:&#160;</text><var>$Sectors</var></line>
<line linenr="093" indent="&#160;&#160;&#160;"><text>return&#160;</text><var>-3</var></line>
<line linenr="094" indent="&#160;"><text>end</text></line>
<line linenr="095" indent=""><text>else</text></line>
<line linenr="096" interruptable="@" indent="&#160;"><var>while&#160;not</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.nav.move</call><text>&#160;:&#160;</text><text>&#160;Target=</text><var>$Station</var></line>
<line linenr="097" interruptable="@" indent="&#160;&#160;"><var>skip&#160;if</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.function1</call><text>&#160;:&#160;</text><text>&#160;#Fn=</text><var>531</var><text>&#160;</text><text>&#160;arg1=</text><var>$Station</var></line>
<line linenr="098" indent="&#160;&#160;&#160;"><text>return&#160;</text><var>-3</var></line>
<line linenr="099" indent="&#160;"><text>end</text></line>
<line linenr="100" indent=""><text>end</text></line>
<line linenr="101" indent=""></line>
<line linenr="102" interruptable="@" indent=""><var>skip&#160;if</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.function</call><text>&#160;:&#160;</text><text>&#160;#Fn=</text><var>610</var><text>&#160;</text><text>&#160;arg1=</text><var>$validator</var><text>&#160;</text><text>&#160;arg2=</text><var>$Station</var><text>&#160;</text><text>&#160;arg3=</text><var>$WareStruct</var><text>&#160;</text><text>&#160;arg4=</text><var>$MinWantedAmount</var><text>&#160;</text><text>&#160;arg5=</text><var>$Sectors</var></line>
<line linenr="103" indent="&#160;"><text>return&#160;</text><var>-4</var></line>
<line linenr="104" indent=""><var>if</var><var>$Station.IsAShip</var></line>
<line linenr="105" indent="&#160;"><text>gosub&#160;</text><var>CheckCanExchangeAndGetPrecision</var></line>
<line linenr="106" indent="&#160;"><var>skip&#160;if</var><var>$CanExchange</var></line>
<line linenr="107" indent="&#160;&#160;"><text>return&#160;</text><var>-4</var></line>
<line linenr="108" indent=""><text>end</text></line>
<line linenr="109" indent=""></line>
<line linenr="110" indent=""><comment><text>*&#160;</text><var>In&#160;&quot;just&#160;fly&quot;&#160;mode&#160;arrived&#160;to&#160;the&#160;supplier</var></comment></line>
<line linenr="111" indent=""><comment><text>*&#160;</text><var>Exit&#160;with&#160;success&#160;zero&#160;code</var></comment></line>
<line linenr="112" indent=""><var>do&#160;if&#160;</var><var>$mode</var><text>&#160;</text><var>==</var><text>&#160;</text><var>1</var></line>
<line linenr="113" indent="&#160;"><text>return&#160;</text><var>0</var></line>
<line linenr="114" indent=""></line>
<line linenr="115" indent=""><text>gosub&#160;</text><var>TryToBuy</var></line>
<line linenr="116" indent=""><text>return&#160;</text><var>$Amount</var></line>
<line linenr="117" indent=""></line>
<line linenr="118" indent=""><comment><text>*&#160;</text><var>In:&#160;$Station</var></comment></line>
<line linenr="119" indent=""><comment><text>*&#160;</text><var>In:&#160;$WantedAmount</var></comment></line>
<line linenr="120" indent=""><comment><text>*&#160;</text><var>In:&#160;$Ware</var></comment></line>
<line linenr="121" indent=""><comment><text>*&#160;</text><var>In:&#160;$Price</var></comment></line>
<line linenr="122" indent=""><comment><text>*&#160;</text><var>Out:&#160;$Amount</var></comment></line>
<line linenr="123" indent=""><var>TryToBuy</var><text>:</text></line>
<line linenr="124" indent=""><text>gosub&#160;</text><var>GetAmount</var></line>
<line linenr="125" interruptable="@" indent=""><var>$Amount=</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.util.loadProduct</call><text>&#160;:&#160;</text><text>&#160;Ware=</text><var>$Ware</var><text>&#160;</text><text>&#160;Amount=</text><var>$Amount</var><text>&#160;</text><text>&#160;Source=</text><var>$Station</var><text>&#160;</text><text>&#160;Price=</text><var>$Price</var></line>
<line linenr="126" indent=""><text>endsub</text></line>
<line linenr="127" indent=""></line>
<line linenr="128" indent=""><comment><text>*&#160;</text><var>Get&#160;amount&#160;to&#160;load.</var></comment></line>
<line linenr="129" indent=""><comment><text>*&#160;</text><var>In:&#160;$Station</var></comment></line>
<line linenr="130" indent=""><comment><text>*&#160;</text><var>In:&#160;$WantedAmount</var></comment></line>
<line linenr="131" indent=""><comment><text>*&#160;</text><var>In:&#160;$Ware</var></comment></line>
<line linenr="132" indent=""><comment><text>*&#160;</text><var>Out:&#160;$Amount</var></comment></line>
<line linenr="133" indent=""><var>GetAmount</var><text>:</text></line>
<line linenr="134" indent=""><var>if</var><var>$Station&#160;-&gt;</var><text>&#160;is&#160;of&#160;class&#160;</text><var>Корабль</var></line>
<line linenr="135" interruptable="@" indent="&#160;"><var>$Amount=</var><var>$Station&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.function1</call><text>&#160;:&#160;</text><text>&#160;#Fn=</text><var>609</var><text>&#160;</text><text>&#160;arg1=</text><var>$Ware</var></line>
<line linenr="136" indent=""><text>else</text></line>
<line linenr="137" indent="&#160;"><var>$Amount=</var><var>$Station&#160;-&gt;</var><text>&#160;get&#160;true&#160;amount&#160;of&#160;ware&#160;</text><var>$Ware</var><text>&#160;in&#160;cargo&#160;bay</text></line>
<line linenr="138" indent=""><text>end</text></line>
<line linenr="139" indent=""><var>do&#160;if&#160;</var><var>$WantedAmount</var></line>
<line linenr="140" indent="&#160;"><var>$Amount=</var><var>$WantedAmount</var></line>
<line linenr="141" indent=""><text>endsub</text></line>
<line linenr="142" indent=""><comment><text>*&#160;</text><var>End&#160;of&#160;GetAmount</var></comment></line>
<line linenr="143" indent=""></line>
<line linenr="144" indent=""></line>
<line linenr="145" indent=""><comment><text>*&#160;</text><var>In:&#160;$Station</var></comment></line>
<line linenr="146" indent=""><comment><text>*&#160;</text><var>Out:&#160;$Precision</var></comment></line>
<line linenr="147" indent=""><comment><text>*&#160;</text><var>Out:&#160;$CanExchange</var></comment></line>
<line linenr="148" indent=""><comment><text>*&#160;</text><var>Out:&#160;$CanUseTransporter</var></comment></line>
<line linenr="149" indent=""><var>CheckCanExchangeAndGetPrecision</var><text>:</text></line>
<line linenr="150" indent=""><var>$Precision=</var><var>null</var></line>
<line linenr="151" indent=""><text>gosub&#160;</text><var>CanCargoExchange</var></line>
<line linenr="152" indent=""><var>do&#160;if&#160;</var><var>$CanUseTransporter</var></line>
<line linenr="153" indent="&#160;"><text>gosub&#160;</text><var>GetPrecision</var></line>
<line linenr="154" indent=""><text>endsub</text></line>
<line linenr="155" indent=""></line>
<line linenr="156" indent=""></line>
<line linenr="157" indent=""><comment><text>*&#160;</text><var>Out:&#160;$Precision</var></comment></line>
<line linenr="158" indent=""><var>GetPrecision</var><text>:</text></line>
<line linenr="159" indent=""><var>$Precision=</var><text>get&#160;transporter&#160;range</text></line>
<line linenr="160" indent=""><var>$Precision=</var><var>$Precision</var><text>&#160;</text><var>/</var><text>&#160;</text><var>4</var><text>&#160;</text><var>*</var><text>&#160;</text><var>3</var></line>
<line linenr="161" indent=""><text>endsub</text></line>
<line linenr="162" indent=""></line>
<line linenr="163" indent=""></line>
<line linenr="164" indent=""><comment><text>*&#160;</text><var>In:&#160;$Station</var></comment></line>
<line linenr="165" indent=""><comment><text>*&#160;</text><var>Out:&#160;$CanExchange</var></comment></line>
<line linenr="166" indent=""><comment><text>*&#160;</text><var>Out:&#160;$CanUseTransporter</var></comment></line>
<line linenr="167" indent=""><var>CanCargoExchange</var><text>:</text></line>
<line linenr="168" indent=""><var>$CanExchange=</var><var>[FALSE]</var></line>
<line linenr="169" indent=""><var>$CanUseTransporter=</var><var>[FALSE]</var></line>
<line linenr="170" interruptable="@" indent=""><var>do&#160;if&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;call&#160;script&#160;</text><call>wwsl.T2.function1</call><text>&#160;:&#160;</text><text>&#160;#Fn=</text><var>531</var><text>&#160;</text><text>&#160;arg1=</text><var>$Station</var></line>
<line linenr="171" indent="&#160;"><var>$CanExchange=</var><var>[TRUE]</var></line>
<line linenr="172" indent=""><var>if</var><var>$Station&#160;-&gt;</var><text>&#160;is&#160;of&#160;class&#160;</text><var>Корабль</var></line>
<line linenr="173" indent="&#160;"><var>$tmp=</var><var>0</var></line>
<line linenr="174" indent="&#160;"><var>do&#160;if&#160;</var><var>[THIS]&#160;-&gt;</var><text>&#160;get&#160;true&#160;amount&#160;of&#160;ware&#160;</text><var>Транспортер</var><text>&#160;in&#160;cargo&#160;bay</text></line>
<line linenr="175" indent="&#160;&#160;"><text>inc&#160;</text><var>$tmp=</var></line>
<line linenr="176" indent="&#160;"><var>do&#160;if&#160;</var><var>$Station&#160;-&gt;</var><text>&#160;get&#160;true&#160;amount&#160;of&#160;ware&#160;</text><var>Транспортер</var><text>&#160;in&#160;cargo&#160;bay</text></line>
<line linenr="177" indent="&#160;&#160;"><text>inc&#160;</text><var>$tmp=</var></line>
<line linenr="178" indent="&#160;"><var>if</var><var>$tmp</var><text>&#160;</text><var>&gt;</var><text>&#160;</text><var>0</var></line>
<line linenr="179" indent="&#160;&#160;"><var>$CanExchange=</var><var>[TRUE]</var></line>
<line linenr="180" indent="&#160;&#160;"><var>$CanUseTransporter=</var><var>[TRUE]</var></line>
<line linenr="181" indent="&#160;"><text>end</text></line>
<line linenr="182" indent=""><text>end</text></line>
<line linenr="183" indent=""><text>endsub</text></line>
<line linenr="184" indent=""></line>
<line linenr="185" indent=""><text>return&#160;</text><var>null</var></line>
</sourcetext>
<codearray>

<sval type="array" size="10">
  <sval type="string" val="wwsl.T2.trip.buyware"/>
  <sval type="int" val="45"/>
  <sval type="string" val="T2: Common - Buy ware"/>
  <sval type="int" val="301"/>
  <sval type="int" val="0"/>
  <sval type="array" size="21">
    <sval type="string" val="WorkspaceStruct"/>
    <sval type="string" val="WareStruct"/>
    <sval type="string" val="WantedAmount"/>
    <sval type="string" val="mode"/>
    <sval type="string" val="validator"/>
    <sval type="string" val="Ware"/>
    <sval type="string" val="Price"/>
    <sval type="string" val="FreeCargoAmount"/>
    <sval type="string" val="MinWantedAmount"/>
    <sval type="string" val="Sectors"/>
    <sval type="string" val="Stations"/>
    <sval type="string" val="Dummy.Index"/>
    <sval type="string" val="Station"/>
    <sval type="string" val="Amount"/>
    <sval type="string" val="tDataSorted"/>
    <sval type="string" val="Station.IsAShip"/>
    <sval type="string" val="Precision"/>
    <sval type="string" val="CanExchange"/>
    <sval type="string" val="Station.Sector"/>
    <sval type="string" val="CanUseTransporter"/>
    <sval type="string" val="tmp"/>
  </sval>
  <sval type="array" size="109">
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="63"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="6"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536869625"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="6"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-5"/>
    </sval>
    <sval type="array" size="10">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.function1"/>
      <sval type="int" val="7"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="4"/>
      <sval type="int" val="613"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-536868857"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="7"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="15"/>
      <sval type="int" val="2"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="8"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536868089"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="10">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.function1"/>
      <sval type="int" val="8"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="4"/>
      <sval type="int" val="604"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-536867577"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="8"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="15"/>
      <sval type="int" val="2"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-536867065"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="8"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="7"/>
      <sval type="int" val="15"/>
      <sval type="int" val="5"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="5"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-6"/>
    </sval>
    <sval type="array" size="8">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.function0"/>
      <sval type="int" val="9"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610607869"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="11"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="12">
      <sval type="int" val="1415"/>
      <sval type="int" val="10"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="11"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="20"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="10"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="4"/>
      <sval type="int" val="6"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="131"/>
      <sval type="int" val="11"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="10"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610604023"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="15"/>
      <sval type="int" val="2"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="143"/>
      <sval type="int" val="11"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="12"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="10"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="11"/>
    </sval>
    <sval type="array" size="10">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.function1"/>
      <sval type="int" val="-536864249"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="4"/>
      <sval type="int" val="623"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="21"/>
    </sval>
    <sval type="array" size="18">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.function"/>
      <sval type="int" val="-536863737"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="6"/>
      <sval type="int" val="4"/>
      <sval type="int" val="610"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="4"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="8"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="9"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="21"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610605048"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
      <sval type="int" val="15"/>
      <sval type="int" val="0"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="0"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="71"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610604280"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="15"/>
      <sval type="int" val="2"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="21"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610603512"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="4"/>
      <sval type="int" val="2"/>
      <sval type="int" val="15"/>
      <sval type="int" val="0"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="0"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-4"/>
    </sval>
    <sval type="array" size="16">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.function4"/>
      <sval type="int" val="10"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="int" val="4"/>
      <sval type="int" val="611"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="4"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="0"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="8"/>
    </sval>
    <sval type="array" size="16">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.function4"/>
      <sval type="int" val="14"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="5"/>
      <sval type="int" val="4"/>
      <sval type="int" val="533"/>
      <sval type="int" val="5"/>
      <sval type="string" val="B"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="10"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="131"/>
      <sval type="int" val="-536860665"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="129"/>
      <sval type="int" val="12"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="14"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="5">
      <sval type="int" val="524"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="18"/>
      <sval type="int" val="9"/>
    </sval>
    <sval type="array" size="5">
      <sval type="int" val="650"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="5">
      <sval type="int" val="519"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
    </sval>
    <sval type="array" size="14">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.function3"/>
      <sval type="int" val="-2147483647"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="4"/>
      <sval type="int" val="502"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
      <sval type="int" val="5"/>
      <sval type="string" val="B"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="705"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="15"/>
      <sval type="int" val="12"/>
      <sval type="int" val="2004"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610598141"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="15"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="83"/>
    </sval>
    <sval type="array" size="10">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.nav.move"/>
      <sval type="int" val="-536856566"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="83"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536857593"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="17"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-3"/>
    </sval>
    <sval type="array" size="4">
      <sval type="int" val="703"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="18"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="1406"/>
      <sval type="int" val="-536856825"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="18"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="9"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-3"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="48"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="61"/>
    </sval>
    <sval type="array" size="8">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.nav.move"/>
      <sval type="int" val="-536855286"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
    </sval>
    <sval type="array" size="10">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.function1"/>
      <sval type="int" val="-536855545"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="4"/>
      <sval type="int" val="531"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-3"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="57"/>
    </sval>
    <sval type="array" size="18">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.function"/>
      <sval type="int" val="-536854777"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="6"/>
      <sval type="int" val="4"/>
      <sval type="int" val="610"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="4"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="8"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="9"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-4"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610595581"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="15"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="83"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-536853753"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="17"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="4"/>
      <sval type="int" val="-4"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610595064"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="3"/>
      <sval type="int" val="4"/>
      <sval type="int" val="1"/>
      <sval type="int" val="15"/>
      <sval type="int" val="0"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="0"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="71"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="TryToBuy"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="75"/>
    </sval>
    <sval type="array" size="14">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.util.loadProduct"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="6"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="GetAmount"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="705"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="-1610592509"/>
      <sval type="int" val="12"/>
      <sval type="int" val="2004"/>
    </sval>
    <sval type="array" size="10">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.function1"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="2"/>
      <sval type="int" val="4"/>
      <sval type="int" val="609"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="112"/>
      <sval type="int" val="80"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="619"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="13"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610591736"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="13"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="2"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="CheckCanExchangeAndGetPrecision"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="16"/>
      <sval type="int" val="1"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="93"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610590200"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="19"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1167"/>
      <sval type="int" val="89"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="GetPrecision"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="1343"/>
      <sval type="int" val="16"/>
    </sval>
    <sval type="array" size="19">
      <sval type="int" val="104"/>
      <sval type="int" val="16"/>
      <sval type="int" val="5"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="16"/>
      <sval type="int" val="4"/>
      <sval type="int" val="4"/>
      <sval type="int" val="15"/>
      <sval type="int" val="14"/>
      <sval type="int" val="4"/>
      <sval type="int" val="3"/>
      <sval type="int" val="15"/>
      <sval type="int" val="13"/>
      <sval type="int" val="5"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="14"/>
      <sval type="int" val="-2"/>
      <sval type="int" val="13"/>
      <sval type="int" val="-4"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="101"/>
      <sval type="string" val="CanCargoExchange"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="17"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="9"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="19"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="9"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="10">
      <sval type="int" val="102"/>
      <sval type="string" val="wwsl.T2.function1"/>
      <sval type="int" val="-1610587640"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="4"/>
      <sval type="int" val="531"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="17"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="705"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="-1610585341"/>
      <sval type="int" val="12"/>
      <sval type="int" val="2004"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="20"/>
      <sval type="int" val="1"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="619"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1610586616"/>
      <sval type="int" val="9"/>
      <sval type="int" val="1048610"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="142"/>
      <sval type="int" val="20"/>
    </sval>
    <sval type="array" size="6">
      <sval type="int" val="619"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="12"/>
      <sval type="int" val="-1610586104"/>
      <sval type="int" val="9"/>
      <sval type="int" val="1048610"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="142"/>
      <sval type="int" val="20"/>
    </sval>
    <sval type="array" size="13">
      <sval type="int" val="104"/>
      <sval type="int" val="-1610585341"/>
      <sval type="int" val="3"/>
      <sval type="int" val="131074"/>
      <sval type="int" val="20"/>
      <sval type="int" val="4"/>
      <sval type="int" val="0"/>
      <sval type="int" val="15"/>
      <sval type="int" val="2"/>
      <sval type="int" val="3"/>
      <sval type="int" val="-1"/>
      <sval type="int" val="2"/>
      <sval type="int" val="-2"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="17"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="7">
      <sval type="int" val="104"/>
      <sval type="int" val="19"/>
      <sval type="int" val="1"/>
      <sval type="int" val="131075"/>
      <sval type="int" val="10"/>
      <sval type="int" val="1"/>
      <sval type="int" val="-1"/>
    </sval>
    <sval type="array" size="1">
      <sval type="int" val="1168"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="103"/>
      <sval type="int" val="0"/>
      <sval type="int" val="0"/>
    </sval>
  </sval>
  <sval type="array" size="4">
    <sval type="array" size="2">
      <sval type="int" val="9"/>
      <sval type="string" val="Workspace"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="9"/>
      <sval type="string" val="Ware"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="10"/>
      <sval type="string" val="Amount (opt.)"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="10"/>
      <sval type="string" val="Mode"/>
    </sval>
  </sval>
  <sval type="array" size="84">
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Summary:"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Make a trip to buy ware."/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="0"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Arguments:"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="$WorkspaceStruct - The data structure that describes available workspace."/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="See dev manual for more details about data structures."/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="$WareStruct - The data structure that describes ware settings."/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="$WantedAmount - Optional parameter if you want to buy exactly specified amount."/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="If specified then ship will try to buy that specified amount."/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="If unspecified then will try to buy maximum possible amount."/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="$mode - buying mode. Available values:"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="0 (unspecified) - default mode as usual: fly &amp; buy"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="1 - just fly"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="2 - buy or die"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="0"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Returns:"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Positive return value means purchased amount."/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Negative return value means error. It may be for many reasons:"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="the ship cannot transport specified ware, the ship has no free cargo space,"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="the ship cannot load specified amount of ware, no station to sell, etc"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Possible error codes:"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="-1 - has no cargo space to load at least one unit of ware"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="-2 - suitable supplier not found in specified workspace"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="-3 - selected station has become technically unusable during the route"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="-4 - selected station has become unusable at end of the route"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="-5 - purchase prohibited (null price)"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="0"/>
      <sval type="int" val="1"/>
      <sval type="string" val="-6 - not enough cargo space (less than &quot;% min. to buy&quot;)"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="0"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="15"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="19"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="20"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="26"/>
      <sval type="int" val="6"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="28"/>
      <sval type="int" val="6"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="28"/>
      <sval type="int" val="1"/>
      <sval type="string" val="In &quot;just fly&quot; mode we are docked to the supplier"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="28"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Exit with success zero code"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="34"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="34"/>
      <sval type="int" val="1"/>
      <sval type="string" val="In &quot;buy or die&quot; mode we had to buythe ware up to this point"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="34"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Exit with error code because this didn't happened"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="36"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="41"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="44"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="45"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="56"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="57"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="61"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="61"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="61"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="67"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="67"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="67"/>
      <sval type="int" val="1"/>
      <sval type="string" val="In &quot;just fly&quot; mode arrived to the supplier"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="67"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Exit with success zero code"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="69"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="71"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="71"/>
      <sval type="int" val="1"/>
      <sval type="string" val="In: $Station"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="71"/>
      <sval type="int" val="1"/>
      <sval type="string" val="In: $WantedAmount"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="71"/>
      <sval type="int" val="1"/>
      <sval type="string" val="In: $Ware"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="71"/>
      <sval type="int" val="1"/>
      <sval type="string" val="In: $Price"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="71"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Out: $Amount"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="75"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="75"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Get amount to load."/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="75"/>
      <sval type="int" val="1"/>
      <sval type="string" val="In: $Station"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="75"/>
      <sval type="int" val="1"/>
      <sval type="string" val="In: $WantedAmount"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="75"/>
      <sval type="int" val="1"/>
      <sval type="string" val="In: $Ware"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="75"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Out: $Amount"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="79"/>
      <sval type="int" val="5"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="80"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="83"/>
      <sval type="int" val="1"/>
      <sval type="string" val="End of GetAmount"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="83"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="83"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="83"/>
      <sval type="int" val="1"/>
      <sval type="string" val="In: $Station"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="83"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Out: $Precision"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="83"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Out: $CanExchange"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="83"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Out: $CanUseTransporter"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="89"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="89"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="89"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Out: $Precision"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="93"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="93"/>
      <sval type="int" val="2"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="93"/>
      <sval type="int" val="1"/>
      <sval type="string" val="In: $Station"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="93"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Out: $CanExchange"/>
    </sval>
    <sval type="array" size="3">
      <sval type="int" val="93"/>
      <sval type="int" val="1"/>
      <sval type="string" val="Out: $CanUseTransporter"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="107"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="107"/>
      <sval type="int" val="4"/>
    </sval>
    <sval type="array" size="2">
      <sval type="int" val="108"/>
      <sval type="int" val="2"/>
    </sval>
  </sval>
  <sval type="int" val="0"/>
</sval>

</codearray>
</script>
